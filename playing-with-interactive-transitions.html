<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta content="width=device-width" name="viewport"/>
    <meta name="description" content="programmer and manager of the chaos"/>
    <title>Playing with Interactive Navigation Transitions</title>
    <link rel="stylesheet" href="/css/all.css">
  </head>
  <body>
      <div class="wrapper">
          <header>
              <h1><a href="/">David Grandinetti</a></h1>
          </header>
          <div class="container">
              <div class="inner">
                    <h1>
  Playing with Interactive Navigation Transitions
</h1>
<h4 class="date">
  Jul 09, 2014
</h4>
<article>
    <p>Custom interactions were one of the many things released as part of iOS7 but it was something that remained slightly confusing for me after watching the <a href="https://developer.apple.com/videos/wwdc/2013/?id=218">WWDC session</a>. I found <a href="http://www.teehanlax.com/blog/custom-uiviewcontroller-transitions/">other</a> <a href="http://www.objc.io/issue-5/view-controller-transitions.html">posts</a> it, which clarified a few things.</p>

<p><a href="http://objectivetoast.com/2014/04/14/interactive-transitions/">Andrew Hershberger</a> wrote a great post that clarified the last point of confusion that I had, namely the relationship between the non-interactive animation and how it became interactive. The key is that you can control both the <code class="highlighter-rouge">speed</code> and <code class="highlighter-rouge">timeOffset</code> of animations attached to a CALayer, which allows you to scrub forward and backward easily. This seems to be pretty much how the <code class="highlighter-rouge">UIPercentDrivenInteractiveTransition</code> works. For a deeper explanation of controlling animations, read what Johan Sørensen wrote about <a href="http://johansorensen.com/articles/pausing%20and%20controlling%20the%20speed%20of%20Core%20Animation.html">Pausing and controlling the speed of Core Animation</a>.</p>

<p>I decided to implement something akin to the navigation used in both the <a href="http://iphone.artsy.net">Artsy</a> app or the <a href="https://mobile.yahoo.com/newsdigest/">Yahoo News Digest</a> app. If you have never used either, you should. Both are beautifully designed.</p>

<p>While both apps have a similar style for the basic navigation, looking closer I see two obvious differences: the placement of the navigation buttons and the scaling of the background view.</p>

<p><img src="../images/artsy_transition.png" alt="Screenshot of Artsy" /></p>

<p>First, if you look closely at the Artsy nav, the bottom/back view does not just scale down, it also seems to favor scaling towards the top-center of the screen. We can achieve this by moving the <code class="highlighter-rouge">anchorPoint</code> for that layer, which will affect any transformations we add to it.</p>

<p>Second, you may notice that the navigation buttons are not part of the viewControllers within the nav controller, but are part of the actual <code class="highlighter-rouge">navigationController.view</code>. So the buttons persist even while <code class="highlighter-rouge">viewControllers</code> are pushed or popped.</p>

<p><img src="../images/yahoo_news_transition.png" alt="Screenshot of Yahoo News Digest" /></p>

<p>Yahoo has navigation buttons, but they seem to be attached to the individual view controllers instead of attached to the root view of the navigation controller.</p>

<p>Given these two styles, we’ll implement the Artsy version. In fact, <a href="https://github.com/dbgrandi/NavTransitions">here’s the code</a>.</p>

<p>The only part that deviates from a normal interaction is that the alpha of the navigation button is connected to the gesture recognizer as well as the animator so that it works properly in either non-interactive or interactive mode. This would be a good contender for refactoring.</p>

</article>

              </div>
          </div>
          <footer>
              <div class="social">
                <a href="https://twitter.com/dbgrandi"><img width="128" height="128" alt="David's Twitter Account" src="/images/twitter-120.png"/></a>
                <a href="https://github.com/dbgrandi"><img width="128" height="128" alt="David's Github Account" src="/images/github-120.png"/></a>
              </div>
          </footer>
      </div>
  </body>
</html>
